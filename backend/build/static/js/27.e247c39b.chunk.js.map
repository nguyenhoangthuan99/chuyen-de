{"version":3,"sources":["component/thongtinlopmo.jsx"],"names":["Thongtinlopmo","semesterDk","useState","searchLike","setSearchLike","datas","setDatas","counts","setCounts","page","setPage","LIMIT_PAGE_DEFAULT","limit","setLimit","enqueueSnackbar","useSnackbar","useEffect","fetchData","a","paramsCount","status","semester","params","offset","classApi","count","getFilter","list","response","data","detail","variant","fectchData","getLikeSubjectId","schema","yup","shape","form","useForm","defaultValues","classId","resolver","yupResolver","register","handleSubmit","handleOnSubmit","value","subjectId","countLikeSubjectId","className","onSubmit","id","label","type","style","width","margin","autoFocus","size","fontWeight","background","color","onClick","window","location","reload","length","padding","map","index","subjectName","credit","registered","day","TimeStartConvert","timeStart","TimeEndConvert","timeEnd","fontStyle","fontSize","description","image","pageSize","total","onChange","pageSizeOptions","float","marginRight"],"mappings":"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","file":"static/js/27.e247c39b.chunk.js","sourcesContent":["import { PlusCircleOutlined } from \"@ant-design/icons\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { Button, TextField } from \"@material-ui/core\";\r\nimport { Empty, Pagination } from \"antd\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport classApi from \"../api/classApi\";\r\nimport { LIMIT_PAGE_DEFAULT } from \"../dummydb/dataDefault\";\r\nimport \"./style.scss\";\r\nimport { TimeStartConvert, TimeEndConvert } from \"../dummydb/time\";\r\nfunction Thongtinlopmo({ semesterDk }) {\r\n  const [searchLike, setSearchLike] = useState(\"\");\r\n  const [datas, setDatas] = useState([]);\r\n  const [counts, setCounts] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(LIMIT_PAGE_DEFAULT);\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (searchLike === \"\") {\r\n        try {\r\n          const paramsCount = {\r\n            status: 1,\r\n            semester: semesterDk,\r\n          };\r\n          const params = {\r\n            status: 1,\r\n            semester: semesterDk,\r\n            limit: limit,\r\n            offset: page === 1 ? 0 : (page - 1) * limit,\r\n          };\r\n          const count = await classApi.count(paramsCount);\r\n          setCounts(count);\r\n          const list = await classApi.getFilter(params);\r\n          setDatas(list);\r\n        } catch (error) {\r\n          enqueueSnackbar(error.response.data.detail, {\r\n            variant: \"error\",\r\n          });\r\n        }\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [limit, page, enqueueSnackbar, searchLike, semesterDk]);\r\n  useEffect(() => {\r\n    const fectchData = async () => {\r\n      if (searchLike !== \"\") {\r\n        const params = {\r\n          limit: limit,\r\n          offset: page === 1 ? 0 : (page - 1) * limit,\r\n        };\r\n        const list = await classApi.getLikeSubjectId(params, searchLike);\r\n        setDatas(list);\r\n      }\r\n    };\r\n    fectchData();\r\n  }, [limit, page, searchLike]);\r\n  const handleThem = (data) => {\r\n    try {\r\n      enqueueSnackbar(\r\n        \"Chức năng này đang được bảo trì, vui lòng đăng kí tại trang đăng kí lớp!\",\r\n        {\r\n          variant: \"error\",\r\n        }\r\n      );\r\n    } catch (error) {\r\n      enqueueSnackbar(error.message, {\r\n        variant: \"error\",\r\n      });\r\n    }\r\n  };\r\n  const schema = yup.object().shape({});\r\n  const form = useForm({\r\n    defaultValues: {\r\n      classId: \"\",\r\n    },\r\n    resolver: yupResolver(schema),\r\n  });\r\n  const { register, handleSubmit } = form;\r\n  const handleOnSubmit = async (value) => {\r\n    if (value.subjectId !== \"\") {\r\n      const params = {\r\n        limit: limit,\r\n        offset: page === 1 ? 0 : (page - 1) * limit,\r\n      };\r\n\r\n      const count = await classApi.countLikeSubjectId(value.subjectId);\r\n      setCounts(count);\r\n      const list = await classApi.getLikeSubjectId(params, value.subjectId);\r\n      setDatas(list);\r\n      setSearchLike(value.subjectId);\r\n      setPage(1);\r\n    }\r\n  };\r\n  const handleChangePageAndPageSize = (page, limit) => {\r\n    setPage(page);\r\n    setLimit(limit);\r\n  };\r\n  const handleResetSearch = () => {\r\n    setSearchLike(\"\");\r\n    window.location.reload();\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"search-header\">\r\n        <div className=\"search-malop\">\r\n          <form onSubmit={handleSubmit(handleOnSubmit)}>\r\n            <TextField\r\n              {...register(\"subjectId\")}\r\n              id=\"outlined-input\"\r\n              label=\"Tìm kiếm theo mã học phần\"\r\n              type=\"text\"\r\n              style={{ width: \"230px\", margin: \"20px\" }}\r\n              autoFocus\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n            />\r\n            {searchLike !== \"\" && (\r\n              <Button\r\n                style={{\r\n                  width: \"200px\",\r\n                  margin: \"20px\",\r\n                  fontWeight: \"400\",\r\n                  background: \"rgb(235, 43, 43)\",\r\n                  color: \"white\",\r\n                }}\r\n                variant=\"contained\"\r\n                onClick={handleResetSearch}\r\n              >\r\n                Reset\r\n              </Button>\r\n            )}\r\n\r\n            {searchLike === \"\" && (\r\n              <Button\r\n                style={{\r\n                  width: \"200px\",\r\n                  margin: \"20px\",\r\n                  fontWeight: \"400\",\r\n                  background: \"rgb(235, 43, 43)\",\r\n                  color: \"white\",\r\n                }}\r\n                variant=\"contained\"\r\n                type=\"submit\"\r\n              >\r\n                Tìm kiếm\r\n              </Button>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"table-dangki\">\r\n        {datas.length !== 0 && (\r\n          <table style={{ width: \"100%\", padding: \"10px\" }}>\r\n            <tr>\r\n              <th>STT</th>\r\n              <th>Mã Lớp</th>\r\n              <th>Mã học phần</th>\r\n              <th>Tên học phần</th>\r\n              <th>Số tín chỉ</th>\r\n              <th>Đã đăng kí</th>\r\n              <th>Tối đa</th>\r\n              <th>Thứ</th>\r\n              <th>Thời gian</th>\r\n            </tr>\r\n            {datas.map((data, index) => (\r\n              <tr key={index}>\r\n                <td>{index}</td>\r\n                <td>{data.classId}</td>\r\n                <td>{data.subjectId}</td>\r\n                <td>{data.subjectName}</td>\r\n                <td>{data.credit}</td>\r\n                <td>{data.registered}</td>\r\n                <td>{data.limit}</td>\r\n                <td>{data.day}</td>\r\n                <td>\r\n                  {TimeStartConvert[data.timeStart]} -{\" \"}\r\n                  {TimeEndConvert[data.timeEnd]}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </table>\r\n        )}\r\n        {datas.length === 0 && (\r\n          <Empty\r\n            style={{\r\n              color: \"red\",\r\n              fontWeight: \"600\",\r\n              fontStyle: \"italic\",\r\n              fontSize: \"13px\",\r\n            }}\r\n            description=\"(Empty)\"\r\n            image=\"https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg\"\r\n          />\r\n        )}\r\n      </div>\r\n      <br />\r\n      <br />\r\n      <br />\r\n      {datas.length > 0 && (\r\n        <Pagination\r\n          pageSize={limit}\r\n          total={counts}\r\n          page={page}\r\n          onChange={handleChangePageAndPageSize}\r\n          pageSizeOptions={[5, 10, 15, 20]}\r\n          style={{ float: \"right\", marginRight: \"15px\" }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Thongtinlopmo;\r\n"],"sourceRoot":""}